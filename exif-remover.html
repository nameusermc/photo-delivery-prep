<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-0BSK4FMVEZ"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-0BSK4FMVEZ');
    </script>
    <meta name="p:domain_verify" content="22dded8e603afa3dc4253ce1ac4a6248" />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Free EXIF Data Remover - Strip metadata from photos for privacy. Remove GPS location, camera info, timestamps, and thumbnails. 100% client-side, images never uploaded.">
    <meta name="keywords" content="exif remover, remove metadata, strip exif data, photo privacy tool, remove gps from photo, image metadata cleaner">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://freemicrotools.app/exif-remover.html">
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <title>EXIF Data Remover ‚Äî Free Image Privacy Tool | Free Micro Tools</title>
    

    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Free Micro Web Tools">
    <meta property="og:title" content="EXIF Data Remover ‚Äî Free Image Privacy Tool | Free Micro Tools">
    <meta property="og:description" content="Free EXIF Data Remover - Strip metadata from photos for privacy. Remove GPS location, camera info, timestamps, and thumbnails. 100% client-side, images never uploaded.">
    <meta property="og:url" content="https://freemicrotools.app/exif-remover.html">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="EXIF Data Remover ‚Äî Free Image Privacy Tool | Free Micro Tools">
    <meta name="twitter:description" content="Free EXIF Data Remover - Strip metadata from photos for privacy. Remove GPS location, camera info, timestamps, and thumbnails. 100% client-side, images never uploaded.">

    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "SoftwareApplication",
        "name": "EXIF Data Remover",
        "description": "Strip metadata from photos for privacy with client-side processing",
        "url": "https://freemicrotools.app/exif-remover.html",
        "applicationCategory": "MultimediaApplication",
        "operatingSystem": "Web",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        }
    }
    </script>
    <style>
        /* ========== CSS Reset & Base Styles ========== */
        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        :root {
            --primary: #dc2626;
            --primary-dark: #b91c1c;
            --primary-light: #fee2e2;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --bg: #fef2f2;
            --card-bg: #ffffff;
            --text: #1e293b;
            --text-muted: #64748b;
            --border: #e2e8f0;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
            min-height: 100vh;
            padding: 1rem;
        }

        /* ========== Layout ========== */
        .container {
            max-width: 680px;
            margin: 0 auto;
        }

        /* ========== Card Component ========== */
        .card {
            background: var(--card-bg);
            border-radius: 12px;
            box-shadow: var(--shadow);
            padding: 1.5rem;
            margin-bottom: 1rem;
        }

        .card-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: var(--primary);
        }

        .card-subtitle {
            color: var(--text-muted);
            font-size: 0.875rem;
            margin-bottom: 1.5rem;
        }

        /* ========== Privacy Badge ========== */
        .privacy-badge {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1rem;
            background: #ecfdf5;
            border-radius: 8px;
            font-size: 0.8125rem;
            color: #047857;
            margin-bottom: 1.25rem;
            border: 1px solid #a7f3d0;
        }

        .privacy-badge strong {
            color: #065f46;
        }

        /* ========== Drop Zone ========== */
        .drop-zone {
            border: 3px dashed var(--border);
            border-radius: 12px;
            padding: 2.5rem 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            background: #fafafa;
            margin-bottom: 1.25rem;
        }

        .drop-zone:hover,
        .drop-zone.drag-over {
            border-color: var(--primary);
            background: var(--primary-light);
        }

        .drop-zone-icon {
            font-size: 3rem;
            margin-bottom: 0.75rem;
        }

        .drop-zone-text {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text);
            margin-bottom: 0.25rem;
        }

        .drop-zone-hint {
            font-size: 0.8125rem;
            color: var(--text-muted);
        }

        .drop-zone input[type="file"] {
            display: none;
        }

        .browse-link {
            color: var(--primary);
            text-decoration: underline;
            cursor: pointer;
        }

        /* ========== Options Section ========== */
        .options-section {
            background: #f8fafc;
            border-radius: 10px;
            padding: 1rem;
            margin-bottom: 1.25rem;
        }

        .options-title {
            font-weight: 700;
            font-size: 0.875rem;
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.75rem;
        }

        .form-group {
            margin-bottom: 0;
        }

        label {
            display: block;
            font-weight: 600;
            margin-bottom: 0.375rem;
            font-size: 0.8125rem;
        }

        select,
        input[type="number"] {
            width: 100%;
            padding: 0.625rem 0.875rem;
            border: 2px solid var(--border);
            border-radius: 6px;
            font-size: 0.9375rem;
            font-family: inherit;
            transition: border-color 0.2s;
            background: white;
        }

        select:focus,
        input[type="number"]:focus {
            outline: none;
            border-color: var(--primary);
        }

        .input-with-unit {
            position: relative;
        }

        .input-unit {
            position: absolute;
            right: 0.75rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-muted);
            font-size: 0.8125rem;
            pointer-events: none;
        }

        input.has-unit {
            padding-right: 2.5rem;
        }

        input[type="number"]::-webkit-outer-spin-button,
        input[type="number"]::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        input[type="number"] {
            -moz-appearance: textfield;
        }

        /* ========== Info Box ========== */
        .info-box {
            background: #eff6ff;
            border: 1px solid #bfdbfe;
            border-radius: 8px;
            padding: 0.875rem 1rem;
            margin-bottom: 1.25rem;
            font-size: 0.8125rem;
            color: #1e40af;
        }

        .info-box-title {
            font-weight: 700;
            margin-bottom: 0.375rem;
            display: flex;
            align-items: center;
            gap: 0.375rem;
        }

        .info-box ul {
            margin-left: 1.25rem;
            margin-top: 0.375rem;
        }

        .info-box li {
            margin-bottom: 0.125rem;
        }

        /* ========== Action Buttons ========== */
        .btn {
            padding: 0.875rem 1.25rem;
            border: none;
            border-radius: 8px;
            font-size: 0.9375rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
            width: 100%;
        }

        .btn-primary:hover:not(:disabled) {
            background: var(--primary-dark);
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-success:hover:not(:disabled) {
            background: #059669;
        }

        .action-row {
            display: flex;
            gap: 0.75rem;
            margin-top: 1rem;
        }

        .action-row .btn {
            flex: 1;
        }

        /* ========== Progress Bar ========== */
        .progress-container {
            display: none;
            margin-bottom: 1rem;
        }

        .progress-container.show {
            display: block;
        }

        .progress-bar {
            height: 8px;
            background: var(--border);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--primary);
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .progress-text {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-top: 0.375rem;
            text-align: center;
        }

        /* ========== Image Queue ========== */
        .queue-section {
            display: none;
            margin-top: 1.5rem;
            padding-top: 1.5rem;
            border-top: 2px solid var(--border);
        }

        .queue-section.show {
            display: block;
        }

        .queue-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .queue-title {
            font-weight: 700;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .queue-count {
            background: var(--primary-light);
            color: var(--primary);
            padding: 0.125rem 0.5rem;
            border-radius: 10px;
            font-size: 0.75rem;
            font-weight: 700;
        }

        .btn-clear {
            padding: 0.375rem 0.75rem;
            font-size: 0.75rem;
            background: #fee2e2;
            color: #dc2626;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
        }

        .btn-clear:hover {
            background: #fecaca;
        }

        .image-list {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            max-height: 400px;
            overflow-y: auto;
        }

        .image-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem;
            background: #f8fafc;
            border-radius: 8px;
            border: 1px solid var(--border);
        }

        .image-item.processing {
            border-color: var(--warning);
            background: #fffbeb;
        }

        .image-item.done {
            border-color: var(--success);
            background: #ecfdf5;
        }

        .image-item.error {
            border-color: var(--danger);
            background: #fef2f2;
        }

        .image-thumb {
            width: 48px;
            height: 48px;
            object-fit: cover;
            border-radius: 6px;
            background: white;
            border: 1px solid var(--border);
            flex-shrink: 0;
        }

        .image-info {
            flex: 1;
            min-width: 0;
        }

        .image-name {
            font-weight: 600;
            font-size: 0.8125rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .image-meta {
            font-size: 0.6875rem;
            color: var(--text-muted);
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .meta-removed {
            color: var(--success);
            font-weight: 600;
        }

        .image-status {
            font-size: 0.6875rem;
            font-weight: 600;
            padding: 0.125rem 0.5rem;
            border-radius: 4px;
            flex-shrink: 0;
        }

        .image-status.pending {
            background: #f1f5f9;
            color: var(--text-muted);
        }

        .image-status.processing {
            background: #fef3c7;
            color: #b45309;
        }

        .image-status.done {
            background: #d1fae5;
            color: #047857;
        }

        .image-status.error {
            background: #fee2e2;
            color: #dc2626;
        }

        .image-actions {
            display: flex;
            gap: 0.375rem;
            flex-shrink: 0;
        }

        .btn-download {
            padding: 0.375rem 0.625rem;
            background: var(--success);
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 0.6875rem;
            font-weight: 600;
            cursor: pointer;
        }

        .btn-download:hover {
            background: #059669;
        }

        .btn-remove {
            padding: 0.375rem 0.5rem;
            background: #fee2e2;
            color: #dc2626;
            border: none;
            border-radius: 4px;
            font-size: 0.75rem;
            cursor: pointer;
        }

        .btn-remove:hover {
            background: #fecaca;
        }

        /* ========== Instructions Section ========== */
        .instructions {
            background: #f1f5f9;
            border-radius: 8px;
            padding: 1rem;
            margin-top: 1rem;
        }

        .instructions h3 {
            font-size: 0.875rem;
            margin-bottom: 0.5rem;
            color: var(--text);
        }

        .instructions ul {
            margin-left: 1.25rem;
            font-size: 0.8125rem;
            color: var(--text-muted);
        }

        .instructions li {
            margin-bottom: 0.25rem;
        }

        /* ========== Footer ========== */
        footer {
            text-align: center;
            padding: 1.5rem 1rem;
            color: var(--text-muted);
            font-size: 0.75rem;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            margin-top: 0.75rem;
        }

        .footer-links a {
            color: var(--text-muted);
            text-decoration: none;
        }

        .footer-links a:hover {
            color: var(--primary);
        }

        /* ========== Tool Description ========== */
        .tool-description {
            background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
            border-left: 4px solid var(--primary);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            font-size: 0.875rem;
        }

        .tool-description p {
            margin: 0;
            color: var(--text);
        }

        /* ========== Toast ========== */
        .toast {
            position: fixed;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: var(--text);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-size: 0.875rem;
            font-weight: 600;
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .toast.show {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
        }

        /* ========== Responsive ========== */
        @media (max-width: 500px) {
            .form-row {
                grid-template-columns: 1fr;
            }

            .action-row {
                flex-direction: column;
            }

            .image-item {
                flex-wrap: wrap;
            }

            .image-actions {
                width: 100%;
                justify-content: flex-end;
                margin-top: 0.5rem;
            }
        }

        </style>
</head>
<body>
    <div class="container">
        <a href="index.html">‚Üê Back to Tools</a>
<!-- Tool Description -->
        <div class="tool-description">
            <p>Remove EXIF data and metadata from your images for privacy. Strip GPS location, camera info, timestamps, and more. 100% client-side processing.</p>
        </div>

        <!-- Main Tool Card -->
        <main class="card">
            <h1 class="card-title">üîí EXIF Data Remover</h1>
            <p class="card-subtitle">Strip metadata from images for privacy</p>

            <!-- Privacy Badge -->
            <div class="privacy-badge">
                <span>üõ°Ô∏è</span>
                <span><strong>100% Private</strong> ‚Äì Images are processed locally and never uploaded</span>
            </div>

            <!-- Info Box -->
            <div class="info-box">
                <div class="info-box-title">
                    <span>‚ÑπÔ∏è</span> What metadata is removed?
                </div>
                <ul>
                    <li><strong>GPS Location</strong> ‚Äì Where the photo was taken</li>
                    <li><strong>Camera Info</strong> ‚Äì Device make, model, settings</li>
                    <li><strong>Timestamps</strong> ‚Äì Date and time taken</li>
                    <li><strong>Software</strong> ‚Äì Editing software used</li>
                    <li><strong>Thumbnails</strong> ‚Äì Embedded preview images</li>
                </ul>
            </div>

            <!-- Drop Zone -->
            <div class="drop-zone" id="dropZone">
                <div class="drop-zone-icon">üì∑</div>
                <div class="drop-zone-text">
                    Drop images here or <span class="browse-link">browse</span>
                </div>
                <div class="drop-zone-hint">Supports JPG, PNG, WebP ‚Ä¢ Max 50 images</div>
                <input type="file" id="fileInput" accept="image/*" multiple>
            </div>

            <!-- Options -->
            <div class="options-section">
                <div class="options-title">
                    <span>‚öôÔ∏è</span> Output Options
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="outputFormat">Output Format</label>
                        <select id="outputFormat">
                            <option value="original">Keep Original</option>
                            <option value="jpeg">JPEG</option>
                            <option value="png">PNG</option>
                            <option value="webp">WebP</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="quality">Quality (JPEG/WebP)</label>
                        <div class="input-with-unit">
                            <input type="number" id="quality" value="92" min="1" max="100" class="has-unit">
                            <span class="input-unit">%</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Progress -->
            <div class="progress-container" id="progressContainer">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                </div>
                <div class="progress-text" id="progressText">Processing 0 of 0...</div>
            </div>

            <!-- Action Buttons -->
            <button type="button" class="btn btn-primary" id="processBtn" disabled>
                <span>üßπ</span> Remove Metadata
            </button>

            <div class="action-row" id="downloadActions" style="display: none;">
                <button type="button" class="btn btn-success" id="downloadAllBtn">
                    <span>üì¶</span> Download All (ZIP)
                </button>
            </div>

            <!-- Image Queue -->
            <div class="queue-section" id="queueSection">
                <div class="queue-header">
                    <div class="queue-title">
                        <span>üìã</span> Image Queue
                        <span class="queue-count" id="queueCount">0</span>
                    </div>
                    <button type="button" class="btn-clear" id="clearAllBtn">Clear All</button>
                </div>
                <div class="image-list" id="imageList">
                    <!-- Image items will be generated here -->
                </div>
            </div>
<!-- Usage Instructions --><div class="instructions">
                <h3>üìñ How to Use</h3>
                <ul>
                    <li><strong>Add images:</strong> Drag & drop or click to browse</li>
                    <li><strong>Process:</strong> Click "Remove Metadata" to strip EXIF data</li>
                    <li><strong>Download:</strong> Get individual files or all as a ZIP</li>
                    <li><strong>Privacy:</strong> Everything happens in your browser</li>
                </ul>
            </div>
        </main>
<footer>
            <p>¬© 2026 Free Micro Web Tools. All tools are free to use.</p>
            <div class="footer-links">
                <a href="about.html">About</a>
                <a href="contact.html">Contact</a>
                <a href="privacy.html">Privacy</a>
                <a href="terms.html">Terms</a>
            </div>
        </footer>

        <!-- Toast -->
        <div class="toast" id="toast">Message</div>
    </div>

    <!-- JSZip for ZIP downloads -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

    <script>
        /**
         * EXIF Data Remover
         * Strips metadata from images by redrawing through Canvas
         * Privacy-friendly - no server uploads
         */
        (function() {
            'use strict';

            // ========== DOM References ==========
            const dropZone = document.getElementById('dropZone');
            const fileInput = document.getElementById('fileInput');
            const outputFormat = document.getElementById('outputFormat');
            const qualityInput = document.getElementById('quality');
            const processBtn = document.getElementById('processBtn');
            const downloadAllBtn = document.getElementById('downloadAllBtn');
            const downloadActions = document.getElementById('downloadActions');
            const progressContainer = document.getElementById('progressContainer');
            const progressFill = document.getElementById('progressFill');
            const progressText = document.getElementById('progressText');
            const queueSection = document.getElementById('queueSection');
            const queueCount = document.getElementById('queueCount');
            const imageList = document.getElementById('imageList');
            const clearAllBtn = document.getElementById('clearAllBtn');
            const toast = document.getElementById('toast');

            // State
            let imageQueue = [];
            let processedImages = [];
            const MAX_IMAGES = 50;

            // ========== Utility Functions ==========

            function showToast(message) {
                toast.textContent = message;
                toast.classList.add('show');
                setTimeout(() => toast.classList.remove('show'), 2500);
            }

            function formatFileSize(bytes) {
                if (bytes < 1024) return bytes + ' B';
                if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + ' KB';
                return (bytes / (1024 * 1024)).toFixed(1) + ' MB';
            }

            function getOutputMimeType(originalType) {
                const format = outputFormat.value;
                if (format === 'original') {
                    // Default to JPEG for unsupported formats
                    if (originalType === 'image/gif') return 'image/png';
                    return originalType || 'image/jpeg';
                }
                const mimeTypes = {
                    'jpeg': 'image/jpeg',
                    'png': 'image/png',
                    'webp': 'image/webp'
                };
                return mimeTypes[format] || 'image/jpeg';
            }

            function getFileExtension(mimeType) {
                const extensions = {
                    'image/jpeg': '.jpg',
                    'image/png': '.png',
                    'image/webp': '.webp'
                };
                return extensions[mimeType] || '.jpg';
            }

            // ========== File Handling ==========

            function handleFiles(files) {
                const validFiles = Array.from(files).filter(f => f.type.startsWith('image/'));
                
                if (validFiles.length === 0) {
                    showToast('‚ö†Ô∏è Please select valid image files');
                    return;
                }

                const remaining = MAX_IMAGES - imageQueue.length;
                const toAdd = validFiles.slice(0, remaining);

                if (validFiles.length > remaining) {
                    showToast(`‚ö†Ô∏è Only adding ${remaining} images (max ${MAX_IMAGES})`);
                }

                toAdd.forEach(file => addToQueue(file));
                updateUI();
            }

            function addToQueue(file) {
                const id = Date.now() + '-' + Math.random().toString(36).substr(2, 9);
                
                const reader = new FileReader();
                reader.onload = (e) => {
                    const img = new Image();
                    img.onload = () => {
                        const item = {
                            id,
                            file,
                            name: file.name,
                            originalSize: file.size,
                            width: img.width,
                            height: img.height,
                            dataUrl: e.target.result,
                            status: 'pending',
                            cleanBlob: null,
                            cleanSize: 0
                        };
                        imageQueue.push(item);
                        renderQueue();
                        updateUI();
                    };
                    img.src = e.target.result;
                };
                reader.readAsDataURL(file);
            }

            function removeFromQueue(id) {
                imageQueue = imageQueue.filter(item => item.id !== id);
                processedImages = processedImages.filter(item => item.id !== id);
                renderQueue();
                updateUI();
            }

            function clearQueue() {
                imageQueue = [];
                processedImages = [];
                renderQueue();
                updateUI();
                downloadActions.style.display = 'none';
            }

            // ========== Queue Rendering ==========

            function renderQueue() {
                if (imageQueue.length === 0) {
                    queueSection.classList.remove('show');
                    return;
                }

                queueSection.classList.add('show');
                queueCount.textContent = imageQueue.length;

                imageList.innerHTML = imageQueue.map(item => {
                    const sizeDiff = item.status === 'done' ? item.originalSize - item.cleanSize : 0;
                    const sizeReduction = sizeDiff > 0 ? `(-${formatFileSize(sizeDiff)})` : '';
                    
                    return `
                        <div class="image-item ${item.status}" data-id="${item.id}">
                            <img src="${item.dataUrl}" alt="${item.name}" class="image-thumb">
                            <div class="image-info">
                                <div class="image-name">${item.name}</div>
                                <div class="image-meta">
                                    <span>${item.width}√ó${item.height}</span>
                                    <span>${formatFileSize(item.originalSize)}</span>
                                    ${item.status === 'done' ? `<span class="meta-removed">‚úì Metadata removed ${sizeReduction}</span>` : ''}
                                </div>
                            </div>
                            <span class="image-status ${item.status}">
                                ${item.status === 'pending' ? 'Pending' : 
                                  item.status === 'processing' ? 'Processing...' : 
                                  item.status === 'done' ? 'Clean' : 'Error'}
                            </span>
                            <div class="image-actions">
                                ${item.status === 'done' ? `<button class="btn-download" data-id="${item.id}">‚¨á Download</button>` : ''}
                                <button class="btn-remove" data-id="${item.id}">‚úï</button>
                            </div>
                        </div>
                    `;
                }).join('');

                // Attach event listeners
                imageList.querySelectorAll('.btn-remove').forEach(btn => {
                    btn.addEventListener('click', () => removeFromQueue(btn.dataset.id));
                });

                imageList.querySelectorAll('.btn-download').forEach(btn => {
                    btn.addEventListener('click', () => downloadSingle(btn.dataset.id));
                });
            }

            function updateUI() {
                processBtn.disabled = imageQueue.length === 0;
                
                const hasDone = imageQueue.some(item => item.status === 'done');
                downloadActions.style.display = hasDone ? 'flex' : 'none';
            }

            // ========== EXIF Removal via Canvas ==========

            /**
             * Remove EXIF by redrawing image through canvas
             * Canvas only captures pixel data, discarding all metadata
             */
            async function stripMetadata(item) {
                return new Promise((resolve, reject) => {
                    const img = new Image();
                    img.onload = () => {
                        // Create canvas at original dimensions
                        const canvas = document.createElement('canvas');
                        canvas.width = img.width;
                        canvas.height = img.height;

                        // Draw image (this strips all metadata)
                        const ctx = canvas.getContext('2d');
                        ctx.drawImage(img, 0, 0);

                        // Get output settings
                        const mimeType = getOutputMimeType(item.file.type);
                        const quality = parseInt(qualityInput.value) / 100;

                        // Export as blob
                        canvas.toBlob((blob) => {
                            if (blob) {
                                resolve({
                                    blob,
                                    mimeType
                                });
                            } else {
                                reject(new Error('Failed to create blob'));
                            }
                        }, mimeType, quality);
                    };
                    img.onerror = () => reject(new Error('Failed to load image'));
                    img.src = item.dataUrl;
                });
            }

            async function processQueue() {
                if (imageQueue.length === 0) return;

                progressContainer.classList.add('show');
                processBtn.disabled = true;
                processedImages = [];

                for (let i = 0; i < imageQueue.length; i++) {
                    const item = imageQueue[i];
                    item.status = 'processing';
                    renderQueue();

                    progressFill.style.width = ((i / imageQueue.length) * 100) + '%';
                    progressText.textContent = `Processing ${i + 1} of ${imageQueue.length}...`;

                    try {
                        const result = await stripMetadata(item);
                        item.cleanBlob = result.blob;
                        item.cleanSize = result.blob.size;
                        item.mimeType = result.mimeType;
                        item.status = 'done';
                        processedImages.push(item);
                    } catch (err) {
                        item.status = 'error';
                        console.error('Error processing', item.name, err);
                    }

                    renderQueue();
                }

                progressFill.style.width = '100%';
                progressText.textContent = `Completed ${processedImages.length} of ${imageQueue.length} images`;

                setTimeout(() => {
                    progressContainer.classList.remove('show');
                }, 2000);

                processBtn.disabled = false;
                updateUI();
                showToast(`‚úÖ Cleaned ${processedImages.length} images`);
            }

            // ========== Downloads ==========

            function downloadSingle(id) {
                const item = imageQueue.find(i => i.id === id);
                if (!item || !item.cleanBlob) return;

                const ext = getFileExtension(item.mimeType);
                const baseName = item.name.replace(/\.[^/.]+$/, '');
                const fileName = `${baseName}_clean${ext}`;

                const url = URL.createObjectURL(item.cleanBlob);
                const a = document.createElement('a');
                a.href = url;
                a.download = fileName;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }

            async function downloadAllAsZip() {
                if (processedImages.length === 0) {
                    showToast('‚ö†Ô∏è No processed images to download');
                    return;
                }

                downloadAllBtn.disabled = true;
                downloadAllBtn.innerHTML = '<span>‚è≥</span> Creating ZIP...';

                try {
                    const zip = new JSZip();

                    processedImages.forEach((item) => {
                        const ext = getFileExtension(item.mimeType);
                        const baseName = item.name.replace(/\.[^/.]+$/, '');
                        const fileName = `${baseName}_clean${ext}`;
                        zip.file(fileName, item.cleanBlob);
                    });

                    const blob = await zip.generateAsync({ type: 'blob' });
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `clean_images_${Date.now()}.zip`;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);

                    showToast('‚úÖ ZIP downloaded!');
                } catch (err) {
                    console.error('ZIP creation failed:', err);
                    showToast('‚ùå Failed to create ZIP');
                }

                downloadAllBtn.disabled = false;
                downloadAllBtn.innerHTML = '<span>üì¶</span> Download All (ZIP)';
            }

            // ========== Event Listeners ==========

            // Drop zone click
            dropZone.addEventListener('click', () => fileInput.click());

            // File input change
            fileInput.addEventListener('change', (e) => {
                handleFiles(e.target.files);
                fileInput.value = '';
            });

            // Drag and drop
            dropZone.addEventListener('dragover', (e) => {
                e.preventDefault();
                dropZone.classList.add('drag-over');
            });

            dropZone.addEventListener('dragleave', () => {
                dropZone.classList.remove('drag-over');
            });

            dropZone.addEventListener('drop', (e) => {
                e.preventDefault();
                dropZone.classList.remove('drag-over');
                handleFiles(e.dataTransfer.files);
            });

            // Buttons
            processBtn.addEventListener('click', processQueue);
            downloadAllBtn.addEventListener('click', downloadAllAsZip);
            clearAllBtn.addEventListener('click', clearQueue);

            // Prevent default drag behavior on window
            window.addEventListener('dragover', (e) => e.preventDefault());
            window.addEventListener('drop', (e) => e.preventDefault());

        })();
    </script>

    <!-- GA4 Event Tracking -->
    <script>
        (function() {
            // Track tool page landing
            gtag('event', 'tool_landed', {
                'tool_name': 'EXIF Data Remover'
            });
            
            // Track tool usage
            function trackToolUsed(inputCount, customValuesUsed, resultGenerated) {
                gtag('event', 'tool_used', {
                    'tool_name': 'EXIF Data Remover',
                    'input_count': inputCount || 0,
                    'custom_values_used': customValuesUsed || false,
                    'result_generated': resultGenerated || false
                });
            }
            
            // Expose tracking function globally for this tool
            window.trackToolUsed = trackToolUsed;
        })();
    </script>
</body>
</html>
